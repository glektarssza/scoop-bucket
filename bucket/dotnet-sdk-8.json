{
    "version": "8.0.418",
    "description": ".NET is a free, cross-platform, open source developer platform for building many different types of applications.",
    "homepage": "https://www.microsoft.com/net/",
    "license": "MIT",
    "suggest": {
        "vcredist": "extras/vcredist2022"
    },
    "architecture": {
        "64bit": {
            "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/8.0.418/dotnet-sdk-8.0.418-win-x64.zip",
            "hash": "sha512:5d085023b021be416b606e6745bedaf2ae51ca581d4a8e4ecb8d70af3701f651c844e7b541e55aec008143986ae5eb3d0af2d03caf4759238e5093f9dea9f11b"
        },
        "32bit": {
            "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/8.0.418/dotnet-sdk-8.0.418-win-x86.zip",
            "hash": "sha512:b18adb9c0f09dc3edcaf32bc431ed57d9daa17c1920b77ccb16534502c386f96006c5c2cd3180e0351780b35d0949bf54f8e4f8762e2b9f4f5fb8c0ea82b6333"
        },
        "arm64": {
            "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/8.0.418/dotnet-sdk-8.0.418-win-arm64.zip",
            "hash": "sha512:e2a144e295d9d3ca40b33b4b2df59ef055b8a1c89b1abb9d80d4bed7f76c643c91835103a03ac807bfd21fbe1ec72273a770be0a1e47f4188c0f46c2fe6ad595"
        }
    },
    "env_add_path": ".",
    "env_set": {
        "DOTNET_ROOT": "$dir",
        "MSBuildSDKsPath": "$dir\\sdk\\$version\\Sdks"
    },
    "installer": {
        "script": [
            "info \"Checking if SDK/runtime version $version has already been installed...\"",
            "if (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/$version.lock\") {",
            "    error \"SDK/runtime version $version has already been installed!\"",
            "    return $false",
            "}",
            "info 'Checking if shared dotnet data location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/\")) {",
            "    info 'Shared dotnet data location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/\"",
            "}",
            "info 'Checking if shared dotnet host fxr location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/host/fxr/\")) {",
            "    info 'Shared dotnet host fxr location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/host/fxr/\"",
            "}",
            "info 'Checking if shared dotnet SDK location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/sdk/\")) {",
            "    info 'Shared dotnet SDK location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/sdk/\"",
            "}",
            "info 'Checking if shared dotnet packs location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/packs/\")) {",
            "    info 'Shared dotnet packs location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/packs/\"",
            "}",
            "info 'Checking if shared dotnet SDK manifests location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/sdk-manifests/\")) {",
            "    info 'Shared dotnet SDK manifests location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/sdk-manifests/\"",
            "}",
            "info 'Checking if shared dotnet shared data manifests location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/shared/\")) {",
            "    info 'Shared dotnet shared data manifests location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/shared/\"",
            "}",
            "info 'Checking if shared dotnet templates data manifests location already exists...'",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/templates/\")) {",
            "    info 'Shared dotnet templates data manifests location does not exist, creating...'",
            "    New-Item -Type Directory -Force -Path \"$env:LOCALAPPDATA/dotnet-sdks/templates/\"",
            "}",
            "$filesOperatedOn = [System.Collections.Generic.List[string]]::new()",
            "info 'Relocating dotnet host fxr to shared location...'",
            "Get-ChildItem -Path \"$dir/host/fxr/\" | Move-Item -PassThru -Destination \"$env:LOCALAPPDATA/dotnet-sdks/host/fxr/\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) }",
            "Remove-Item -Recurse -Path \"$dir/host/\"",
            "info 'Relocating dotnet SDK to shared location...'",
            "Get-ChildItem -Path \"$dir/sdk/\" | Move-Item -PassThru -Destination \"$env:LOCALAPPDATA/dotnet-sdks/sdk/\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) }",
            "Remove-Item -Recurse -Path \"$dir/sdk/\"",
            "info 'Relocating dotnet packs to shared location...'",
            "Get-ChildItem -Path \"$dir/packs/\" | ForEach-Object { Move-Item -Path $_ -Destination \"$env:LOCALAPPDATA/dotnet-sdks/packs/$($_.Directory.Parent.BaseName)\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) } }",
            "Remove-Item -Recurse -Path \"$dir/packs/\"",
            "info 'Relocating dotnet SDK manifests to shared location...'",
            "Get-ChildItem -Path \"$dir/sdk-manifests/\" | Move-Item -PassThru -Destination \"$env:LOCALAPPDATA/dotnet-sdks/sdk-manifests/\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) }",
            "Remove-Item -Recurse -Path \"$dir/sdk-manifests/\"",
            "info 'Relocating dotnet shared data manifests to shared location...'",
            "Get-ChildItem -Path \"$dir/shared/\" | ForEach-Object { Move-Item -Path $_ -Destination \"$env:LOCALAPPDATA/dotnet-sdks/shared/$($_.Directory.Parent.BaseName)\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) } }",
            "Remove-Item -Recurse -Path \"$dir/shared/\"",
            "info 'Relocating dotnet templates data manifests to shared location...'",
            "Get-ChildItem -Path \"$dir/templates/\" | Move-Item -PassThru -Destination \"$env:LOCALAPPDATA/dotnet-sdks/templates/\" | ForEach-Object { $filesOperatedOn.Add($_.FullName) }",
            "Remove-Item -Recurse -Path \"$dir/templates/\"",
            "info 'Linking shared SDK locations to scoop app path locations...'",
            "warn \"This might fail if you can't create symbolic links!\"",
            "New-Item -Type SymbolicLink -Path \"$dir/host/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/host/\"",
            "New-Item -Type SymbolicLink -Path \"$dir/sdk/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/sdk/\"",
            "New-Item -Type SymbolicLink -Path \"$dir/packs/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/packs/\"",
            "New-Item -Type SymbolicLink -Path \"$dir/sdk-manifests/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/sdk-manifests/\"",
            "New-Item -Type SymbolicLink -Path \"$dir/shared/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/shared/\"",
            "New-Item -Type SymbolicLink -Path \"$dir/templates/\" -Target \"$env:LOCALAPPDATA/dotnet-sdk/templates/\"",
            "info 'Writing lock file...'",
            "$filesOperatedOn | Out-File -Encoding utf8 -Path \"$env:LOCALAPPDATA/dotnet-sdks/$version.lock\"",
            "return $true"
        ]
    },
    "uninstaller": {
        "script": [
            "info \"Checking if SDK/runtime version $version has been installed...\"",
            "if (-not (Test-Path -Path \"$env:LOCALAPPDATA/dotnet-sdks/$version.lock\")) {",
            "    error \"SDK/runtime version $version has not been installed!\"",
            "    return $false",
            "}",
            "info 'Reading lock file and deleting shared dotnet data...'",
            "Get-Content -Path \"$env:LOCALAPPDATA/dotnet-sdks/$version.lock\" | Get-Item | Remove-Item -Recurse -Force",
            "info 'Deleting lock file...'",
            "Remove-Item \"$env:LOCALAPPDATA/dotnet-sdks/$version.lock\"",
            "info 'Deleting symbolic links...'",
            "warn \"This might fail if you can't delete symbolic links!\"",
            "(Get-Item -Path \"$dir/host/\").Delete()",
            "(Get-Item -Path \"$dir/sdk/\").Delete()",
            "(Get-Item -Path \"$dir/packs/\").Delete()",
            "(Get-Item -Path \"$dir/sdk-manifests/\").Delete()",
            "(Get-Item -Path \"$dir/shared/\").Delete()",
            "(Get-Item -Path \"$dir/templates/\").Delete()",
            "info 'Done!'",
            "return $true"
        ]
    },
    "pre_uninstall": "info 'If the uninstall fails with a message saying that access is denied, you may need to log out of your current account, log back in and try again.'",
    "checkver": {
        "url": "https://dotnetcli.blob.core.windows.net/dotnet/release-metadata/releases-index.json",
        "jsonpath": "$..releases-index[?(@.channel-version == '8.0')].latest-sdk"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/$version/dotnet-sdk-$version-win-x64.zip"
            },
            "32bit": {
                "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/$version/dotnet-sdk-$version-win-x86.zip"
            },
            "arm64": {
                "url": "https://dotnetcli.azureedge.net/dotnet/Sdk/$version/dotnet-sdk-$version-win-arm64.zip"
            }
        },
        "hash": {
            "url": "https://dotnetcli.blob.core.windows.net/dotnet/release-metadata/$majorVersion.$minorVersion/releases.json",
            "regex": "(?s)$basename.*?$sha512"
        }
    }
}
